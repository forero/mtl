#!/usr/bin/env python

from __future__ import print_function, division


from argparse import ArgumentParser
import os.path
from astropy.table import Table, vstack

#from mtl.initialize import results


ap = ArgumentParser()
ap.add_argument('mtlfiles', metavar='mtllist', type=str, nargs='+', help='list of multiple mtl files')
ap.add_argument('--output', help='foo help', default='mtl_concatenated.fits')

def main():
    ns = ap.parse_args()
    filelist = ns.mtlfiles
    outputfile = ns.output

    n_files = len(filelist)
    t = Table.read(filelist[0], format='fits')        
    print('reading {}'.format(filelist[0]))
    for i in range(1,n_files):
        current_t = Table.read(filelist[i], format='fits')
        print('reading {}'.format(filelist[i]))
        t = vstack([t, current_t], join_type='exact')
    
    print('wrote output to {}'.format(outputfile))
    t.write(outputfile, format='fits', overwrite=True)

if __name__=="__main__":
    main()

